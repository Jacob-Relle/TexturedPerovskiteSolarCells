# TexturedPerovskiteSolarCells.opt -- Numerical examples to analyse the optical behaviour of textured perovskite solar cells

**TexturedPerovskiteSolarCells** contains all scripts and referencees to the data needed to reproduce the optical results and figures from the manuscript:
> *Unravelling the mystery of enhanced open-circuit voltages in nanotextured perovskite solar cells*
> 
> Dilara Abdel, Jacob Relle, Thomas Kirchartz, Patrick Jaap, Jürgen Fuhrmann, Sven Burger, Christiane Becker, Klaus Jäger, and Patricio Farrell.

## Overview

The simulation scripts in this repository rely on python version(3.12.4) and JCMsuite version(6.4.3).<br />
A trial licence can be requested here: "https://installation.jcmwave.com/fb13885794fc64c42531c9656f8f6f73.php"

## Directory Structure

The repository is organised into the following main folders:

- **`code/`**
  Contains a juypiter nootebook with the code needed to run the simulations and all relevant .jcm files. All neccessary paths should be defined at the top.
   
- **`results/`**
 Contains the exported quantities for the four textures mainly analyzed in the manuscript.

- **`data/`**
  Use this directory to store the nk-data and the AM1.5G spectrum file

- **`spec-file/`**
  This file contains a list of all neccessary python packages and can be used to create a fitting conda enviornment.

- **`nkdata/`**
  This file contains a list to the needed nk-datasets and the nrel spectrum used from other publications.

## Usage

1. **Clone this repository**
```
git clone https://github.com/Jacob-Relle/TexturedPerovskiteSolarCells.git
cd TexturedPerovskiteSolarCells
```

2. **Download the external data**
Open the file nkdata and:   <br />
  -Download the nk-datasets <br />
  -Download the AM1.5G spectral data <br />
add all files to the *data* directory

3. **Create the needed conda enviornment** <br />
For linux:
```
conda create --name OptSim --file enviornment.yml
conda activate OptSim
```
For Windows:
```
conda create --name OptSim --file enviornment_win.yml
conda activate OptSim
```

4. **Run simulations**
Open the Juypiter notebook Main.ipynb <br />
Set your local paths in the third cell for: <br />
 -Your jcm installation: jcm_root <br />
 -Your working directory: working_dir <br />
 -Your data storage directory for files generated by JCMsuite: data_dir <br />
 -Your final results calculated fromthe jcm exports: results_dir <br />
 -Your nk datasets: dispersion_userdata_path <br />
Texture heights can be adjusted in the second cell.
